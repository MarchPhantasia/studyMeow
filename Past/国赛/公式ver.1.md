
# 思路分析

三个问题底层都是规划问题。

对于 Q1，目标仅仅是最大化未来 7 年总利润。但对于 Q3，可以考虑最小化风险，如市场风险、气候风险等。

## Q1

### 决策变量

设 $x_{i,j,k}^{t,s}$ 为在未来第 $t$ 年（$t \in \{0, 1, \ldots, T\}$），类型为 $i$ ($i \in \{1, \ldots, I\}$) 的第 $j$ ($j \in \{1, \ldots, J_{i}\}$) 个地块上，在第 $s$ ($s \in \{1, \ldots, S\}$) 季次种植作物 $k$ ($k \in \{1, 2, \ldots, K\}$) 的面积（单位：亩），其中：

- $T = 7$ 为未来总年数。记 $t=1$ 为 2024 年，以此类推，$t=7$ 为 2030 年。
- $I = 6$ 为地块类型总数（如平旱地、梯田、山坡地等，共 6 种）。
- $J_{i}$：类型为 $i$ 的地块总数。
- $S=2$：一年中的季次数量。记 $s=1,2$ 分别为第一季和第二季。
- $K$：作物总数。

特别地，根据假设，$t=0$ 时，$x_{i,j,k}^{0,s}$ 为 2023 年的已知数据。

### 目标函数

目标是最大化 2024-2030 年间（即 $t = 1$ 到 $t = 7$）的总利润，针对情况 1（滞销部分浪费），目标函数为：

$$
\max \sum_{t=1}^{T} \sum_{i=1}^{I} \sum_{j=1}^{J_i} \sum_{s=1}^{S} \sum_{k=1}^{K} \left( P_k^{t,s} \cdot \min \left( x_{i,j,k}^{t,s} \cdot Y_{i,k}^{t,s}, V_{i,k}^{t,s} \right) - C_{i,k}^{t,s} \cdot x_{i,j,k}^{t,s} \right)
$$

其中：

- $P_k^{t,s}$：作物 $k$ 在第 $t$ 年第 $s$ 季次的销售单价（元/斤）。
- $x_{i,j,k}^{t,s}$：类型为 $i$ 的第 $j$ 个地块上，在第 $t$ 年第 $s$ 季次种植作物 $k$ 的面积（亩）。
- $Y_{i,k}^{t,s}$：作物 $k$ 在第 $t$ 年第 $s$ 季次中，于类型为 $i$ 的地块上种植的亩产量（斤/亩）。
- $V_{i,k}^{t,s}$：作物 $k$ 在第 $t$ 年第 $s$ 季次中，于类型为 $i$ 的地块上的预计销售量（斤）。
- $C_{i,k}^{t,s}$：作物 $k$ 在第 $t$ 年第 $s$ 季次中，于类型为 $i$ 的地块上的种植成本（元/亩）。

特别地，根据假设，2023 年统计的数据中，预计销售量可根据以下公式计算得到：

$$
V_{i,k}^{0, s} = Y_{i,k}^{0, s} \cdot \sum_{j=0}^{J_{i}}  x_{i,j,k}^{0,s}
$$

### 约束条件

#### 总面积约束

每块地在每个季次上的种植面积不能超过其可用面积：

$$
\sum_{k=1}^{K} x_{i,j,k}^{t,s} \leq A_{i,j}, \quad \forall i, \forall j, \forall t, \forall s
$$

其中 $A_{i,j}$ 是类型 $i$ 的第 $j$ 块地的总面积（亩）。

#### 作物类型约束

根据地块类型和季次的不同，某些作物只能在特定地块类型和季次上种植：

$$
x_{i,j,k}^{t,s} = 0, \quad \text{若作物} \, k \, \text{不适合种植在类型为} \, i \, \text{的地块或第} \, s \, \text{季次}
$$

#### 季次限制

不同季次下，不同类型的地块可能只适合种植特定作物。例如，某些地块在第一个季次适合种植水稻或蔬菜，而在第二个季次可能仅适合种植蔬菜：

$$
x_{i,j,k}^{t,s} = 0, \quad \text{若作物} \, k \, \text{不适合在第} \, s \, \text{季次种植}
$$

#### 轮作约束

为为防止连续两年在同一地块上种植相同作物，轮作约束条件为：

$$
x_{i,j,k}^{t,s} \cdot x_{i,j,k}^{t+1,s'} = 0, \quad \forall i, \forall j, \forall k, \forall s, \forall s', \forall t
$$

此外，从 2023 年开始，要求每块地在三年内至少种植一次豆类作物：

$$
\sum_{t=t_1}^{t_3} \sum_{s=1}^{S} x_{i,j,\text{legume}}^{t,s} \geq 1, \quad \forall i, \forall j
$$


#### 种植分散性约束

为方便管理和耕作，每种作物的种植地应尽量集中，且单块地的种植面积不宜过小：

$$
x_{i,j,k}^{t,s} \geq \text{min\_area}, \quad \forall i, \forall j, \forall k, \forall s, \forall t
$$

#### 地块类型分配约束

不同类型的地块适合种植不同种类的作物，需对每类地块加上相应的种植面积分配限制：

$$
x_{i,j,\text{rice}}^{t,s} + x_{i,j,\text{vegetable}}^{t,s} \leq A_{i,j}, \quad \text{若} \, i \, \text{为适宜种植水稻或蔬菜的地块，且为第} \, s \, \text{季次}
$$

#### 耕作便利性约束

为方便耕种和管理，要求每种作物的种植地尽量集中，不要在多个分散的地块上种植：

$$
\sum_{j \in S_i} x_{i,j,k}^{t,s} \cdot w_{i,j} \geq C_k^{t,s}, \quad \forall i, \forall k, \forall s, \forall t
$$

其中，$S_i$ 为类型 $i$ 下相邻地块的集合，$w_{i,j}$ 是集中种植的权重。

#### 大棚种植约束
根据题目描述，普通大棚和智慧大棚的种植能力不同。普通大棚可以种植一季蔬菜和一季食用菌，而智慧大棚可以种植两季蔬菜。可以添加大棚约束：
$$
	\sum_{k\in{蔬菜,食用菌}} x^{t,s}_{i,j,k} \leq A_{i,j} \quad \text{若} i \text{为普通大棚} 
 $$
$$
	\sum_{k\in{蔬菜}} x^{t,s}_{i,j,k} \leq 2 \times A_{i,j} \quad \text{若} i \text{为智慧大棚} 
 $$


